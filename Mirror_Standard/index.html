<!DOCTYPE html>
<html ng-app="SmartMirror">
<head>
<meta charset="utf-8">
<title>거울아 거울아</title>

	<!-- Libraries -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.js"></script>
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script
		src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
	<script
		src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular-animate.min.js"></script>
	<!-- X2JS -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/x2js/1.2.0/xml2json.min.js"
		charset="utf-8"></script>
	<!-- responsivevoice.js -->
	<script src="http://code.responsivevoice.org/responsivevoice.js"></script>
	<!--  Sound Cloud -->
	<script src="https://connect.soundcloud.com/sdk/sdk-3.0.0.js"></script>

	<!-- App -->
	<script src="js/app.js"></script>
	<script src="config.js"></script>
	<!-- 음성 인식 부분 -->
	<script src="js/annyang.js"></script>
	<script src="js/annyang-service.js"></script>
	<script src="js/command.js">/*명령어*/</script>
	<script src="js/controller.js">/*Annang Service Controller*/</script>

	<!-- 기능 구현  -->
	<script src="js/function-service.js"></script>
	<!--날씨 -->
	<script src="js/weather-service.js"></script>
	<!--지도-->
	<script src="js/map-service.js">/*지도*/</script>
	<script src="js/geolocation-service.js">/*GPS 위치*/</script>
	<!--구글 캘린더-->
	<script src="js/calendar-service.js">/* 구글 캘린더 동기화 */</script>
	<script src="js/rrule.js">/*날짜*/</script>
	<!--Bing MAP API-->
	<script src="js/traffic-service.js"></script>
	<!-- Youtube API-->
	<script src="js/youtube-service.js"></script>
	<!-- Seoul Open Data - Subway API -->
	<script src="js/subway-service.js"></script>
	<!-- Gmail Node Mailer -->
	<script src="js/mailer.js"></script>
	<!-- SoundCloud -->
	<script src="js/soundcloud.js"></script>

	<!--  Notification -->
	<script type="text/javascript">
    	var sender = require('remote').getGlobal('sender');
    	console.log(sender);
    	sender.on('data',function(data){
    		console.log(data.package);
    		var strText = data.text+"";
    		var substringText = strText.substr(0,200)+" ...";
    		var notiSms = document.getElementById('noti-sms');
    		var notiKakao = document.getElementById('noti-kakao');
    		var notiFacebook = document.getElementById('noti-facebook');
    		var notiGmail = document.getElementById('noti-gmail');
    		var notiCall = document.getElementById('noti-call');
    		/** Call */
    		if(data.package === "com.lge.ltecall"){
    			console.log("CAll!!!!!!!"+data.title+":"+data.text);
				notiCall.innerHTML = "전화가 왔습니다!! 번호:"+data.title;
    			if(responsiveVoice.voiceSupport()) {
                  responsiveVoice.speak("전화가 왔습니다. 번호."+data.title,"Korean Female");
                }
    		}
    		/** GMAIL */
    		else if(data.package === "com.google.android.gm"){
    			console.log("GMAIL!!!!!!!"+data.title+":"+data.text);
				notiGmail.innerHTML = "메일주소:"+data.title + ", 내용:"+substringText;
    			if(responsiveVoice.voiceSupport()) {
                  responsiveVoice.speak("메일이 전송되었습니다. 메일주소."+data.title,"Korean Female");
                }
    		}
    		/** KAKAO */
    		else if(data.package === "com.kakao.talk") {
    			console.log("kakao!!!!!!!!!!!!!"+data.title+":"+data.text);
    			notiKakao.innerHTML = "사용자:"+data.title + ", 내용:"+substringText;
    			if(responsiveVoice.voiceSupport()) {
                  responsiveVoice.speak("카카오톡이 전송되었습니다. 사용자."+data.title,"Korean Female");
                }
    		}
    		/** SMS */
    		else if(data.package === "com.android.mms") {
    			console.log("SMS!!!!!!!"+data.title+":"+data.text);
				notiSms.innerHTML = "번호:"+data.title + ", 내용:"+data.text;
    			if(responsiveVoice.voiceSupport()) {
                  responsiveVoice.speak("문자가 전송되었습니다. 번호."+data.title,"Korean Female");
                }
    		}
    		/** Facebook */
    		else if(data.package === "com.facebook.katana" || data.package === "com.facebook.orca"){
    			console.log("Facebook!!!!!!!"+data.title+":"+data.text);
				notiFacebook.innerHTML = "알림:"+data.title;
    			if(responsiveVoice.voiceSupport()) {
                  responsiveVoice.speak("페이스북 알림."+data.title,"Korean Female");
                }
    		}

    	});
   	</script>

	<script>
	  window.$ = window.jQuery =require('./js/jquery-2.2.2.min.js');
	  $(function(){
	  	$('#news').click(function(){
	  		$('#news-div').load('https://news.google.co.kr/news?pz=1&zx=muklwsp2gkt0 .section-toptop .esc-lead-article-title .titletext',function(){
	  			console.log('news loaded.');
	  		});
	  	});
	  });
	</script>

<!-- Styles and Resources -->
<link rel="shortcut icon" href="favicon.ico" />
<link
	href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,800,700'
	rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/main.css" />
<link rel="stylesheet" href="css/weather-icons.css">

</head>
<!-- 1-call -->
<body ng-controller="MirrorCtrl as commands" ng-cloak="">
	<div class="wrap">
		<!-- Time Layout-->
		<div class="top-right">
			<div class="time">{{date | date : 'h:mm:ss a'}}</div>
			<div class="date grey">{{date | date : 'EEE, MMM dd '}}</div>
		</div>

		<!-- Weather Layout-->
		<div class="top">
			<div class="weather">
				<div id="weather-sidebar" class="fade" ng-show="focus == 'default'"></div>
				<div>
					<div class="weather-today">
						<div id="titleWeather">
							<span>TODAY'S WEATHER</span>
						</div>
						<div class="temp_wrap">
							<span class="icon dimmed wi {{currentForcast.wi}}"></span>
							<span class="tempreture">{{currentForcast.temperature}}</span> <span class="degree">&deg;</span>
						</div>
					</div>
					<div class="weather-week-descriptor fade" ng-show="focus == 'default'">
						<div class="weather-week-descriptor">
							<!-- UI를 위해 생략
					                <span>{{hourlyForcast.summary}}</span>
		              				<span>{{weeklyForcast.summary}}</span> -->
						</div>
						<div class="weather-week" ng-repeat="forcast in weeklyForcast.data"
							ng-if="$index > 0">
							<div class="weather-week-day">
								<span class="day light-grey">{{forcast.day}}</span> <span
									class="icon-small dimmed wi {{forcast.wi}}"></span> <span
									class="tempreture tempreture-min">{{forcast.temperatureMin}}&deg;</span>/
								<span class="tempreture tempreture-max">{{forcast.temperatureMax}}&deg;</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container">
			<div class="middle-center">
				
				<div class="greeting hidden" ng-show="focus == 'default' || focus == 'newsMain'">
					<h1>{{greeting}}</h1>
					<!-- <div class="interim-result" ng-bind="interimResult"></div>  -->
					<h3>"거울아 거울아"를 불러주세요</h3>
					
					<div class='hole'>
						<i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i>
						<i></i>
					</div>
				</div>
				<!--
				<div class="contents-box sc-container animate-grow" ng-show="focus == 'default'">
				  <audio id="player" controls="" autoplay="" preload autobuffer style="display: none"></audio>
				  <div><canvas id="visualizer" width="300" height="150"></canvas></div>
				  <img class="sc" ng-src="{{scThumb}}"/>
				  <img class="scWaveform" ng-src="{{scWaveform}}"/>
				  <h2 class="sc" ng-bind="scTrack"></h2>
				</div>

				<div class="listening" ng-show="listening">Ready: {{focus}}</div> -->

				<div class="contents-box animate-grow" ng-show="focus == 'whoissmartmirror'">
					<img id="whoissmartmirror" src="image/whoissmartmirror.PNG" />
				</div>

				<div class="contents-box map animate-grow" ng-show="focus == 'map'">
					<img class="contents map animate-grow" ng-src="{{map}}" />
				</div>

				<div class="youtube-container animate-grow"
					ng-show="focus == 'youtube'">
					<iframe id="youtube_player" class="yt_player_iframe" width="100%"
						height="90%" ng-src="{{currentYoutubeUrl}}" allowfullscreen="true"
						allowscriptaccess="always" frameborder="0"></iframe>
				</div>

				<div class="news-container news animate-grow" ng-show="focus == 'news'">
					<div class="news-title">TODAY'S NEWS</div>
					<div id="news-div" ></div>
				</div>

				<div class="subwayInfo-container animate-grow"
					ng-show="focus == 'subway'">
					<p class="subwayInfo">{{subwayinfo1}}</p>
					<p class="subwayInfo">{{subwayinfo2}}</p>
					<p class="subwayInfo">{{subwayinfo3}}</p>
					<p class="subwayInfo">{{subwayinfo4}}</p>
				</div>

			</div>

			<div class="bottom-center">
				<div class="bottom-right" ng-show="focus == 'newsMain'">
					<div class="newsMain animate-grow" >
						<div class="news-title">TODAY'S NEWS</div>
						<div id="main-news-div"></div>
					</div>
				</div>
				
				<div class="bottom-left" ng-show="focus == 'default'">
					<!-- 하단부 왼쪽 핸드폰 페어링 -->
					<!-- 안드로이드와 통신하여 Notification (전화,Facebook,카카오톡,문자, 메일)을 받습니다. -->
					<div id="titleNoti" class="calendar_wrap">

						<div id="titleCalendar" >
							<span>SCHEDULE</span><br>
						</div>
						
						<ul class="calendar fade" >
							<li class="event" ng-repeat="event in calendar">
								<div class="event-details">
									<span class="day">{{event.start.format('ddd') |
									uppercase}}</span> <span class="summary">{{event.SUMMARY}}</span>
									<div class="details">{{event.start.format('MMMM Do YYYY, h:mm:ss a')}}</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
				<!--<div class="result2" ng-bind="interimResult"></div>-->
		    </div>

			<!-- Command list : commands-->
			<div class="commands animate-grow" ng-show="focus == 'commands'" >
				<h3>사용 가능한 명령</h3>
				<dl>
					<!-- <dt> IP : {{ipAddress}}</dt> -->
					<dt>메뉴</dt>
					<dd>사용 가능한 명령을 보여줍니다.</dd>
					<dt>홈으로</dt>
					<dd>홈 스크린으로 돌아갑니다.</dd>
					<dt>안녕</dt>
					<dd>거울을 깨웁니다.</dd>
					<dt>잘자</dt>
					<dd>거울을 재웁니다.</dd>
					<dt>너는 누구니</dt>
					<dd>거울은 누구일까요?</dd>
					<dt>음악 재생</dt>
					<dd>음악을 랜덤으로 재생해 줍니다.</dd>
					<dt>다음</dt>
					<dd>음악 재생중 다음 재생을 해 줍니다.</dd>
					<dt>이전</dt>
					<dd>음악 재생중 이전 재생을 해 줍니다.</dd>
					<dt>*** 동영상 보여줘</dt>
					<dd>관련 제목 Youtube로 동영상을 보여줍니다.</dd>
					<dt>뉴스 보여줘</dt>
					<dd>실시간 뉴스를 보여줍니다.</dd>
					<dt>*** 위치 보여 줘</dt>
					<dd>원하는 위치를 지도로 보여줍니다.</dd>
					<dt>지도 확대 / 지도 축소 / 지도 리셋</dt>
					<dd>지도를 확대 / 축소 / 기본 줌 상태로 변경합니다.</dd>
					<dt>***역 ***호선 상(하)행선</dt>
					<dd>지하철 도착 정보를 알려줍니다. ex)서울역 1호선 하행선</dd>
					<dt>사진 촬영</dt>
					<dd>라즈베리 카메라를 이용해 사진을 촬영합니다.</dd>
					<dt>비디오 촬영</dt>
					<dd>라즈베리 카메라를 이용해 비디오를 촬영합니다.</dd>
				</dl>
			</div>
		</div>
	</div>

	<!-- Debug Buttons -->
	<div class="debug-info" ng-show="focus == 'debug'">
		<!--  "debug == true">-->
		<button ng-click="focus = (focus == 'map')?'default':'map'">Map</button>
		<button ng-click="focus = (focus == 'commands')?'default':'commands'">Commands</button>
		<button id="news" ng-click="focus = (focus == 'news')?'default':'news'">News</button>
		<button ng-click="debug = false">Close Debug</button>
		<!-- Has results -->
		<div ng-show="commands.results.length > 0">
			<button class="btn btn-default" ng-click="commands.clearResults()">Clear</button>
			<hr />
			<ul class="list-group">
				<li class="list-group-item" ng-repeat="result in commands.results">
					<span class="badge">{{ result.date | date : 'EEE MMM, yyyy
						hh:mm:ss a' }}</span> {{ result.content }}
				</li>
			</ul>
		</div>
	</div>
	<!-- Sleep cover -->
	<div ng-show="focus == 'sleep'" class="sleep-cover fade"></div>

</body>
</html>
